크롬 확장 프로그램을 만들고 있습니다. 이 확장 프로그램의 기능 정의서(PRD) 를 작성하여야 합니다. 또한 이 크롬 확장 프로그램과 네트웍 인터페이스로 동작하는 server 프로그램의 기능도 같이 정의해야 합니다.
기본적인 아이디어를 작성하면, 이를 하나씩 구체화하여 완전한 PRD 를 작성해야 합니다. 
아이디디어를 구체화 하는 과정은 한번에 끝내는것이 아니라 기본 기능->상세 기능으로 기능 명세 하나씩을 디테일하고 깊게 고민하여 완성해 나갑니다. 
--

# 크롬 에이전트 
## 서버로 수신 받은 명령어를 기반으로 웹페이지와 상호작용하여 그 결과를 다시 서버로 전달하는 크롬 확장 프로그램과 서버 프로그램을 개발합니다.

### 크롬 확장 프로그램
* 크롬 확장 프로그램이 활성화 되면, 챗봇용 웹 UI 가 표시되며,서버와 websocket 으로 접속합니다.
* 서버로 부터 메세지를 수신 받으면, 이를 파싱하여, 작업을 수행합니다.
* 서버로 부터 받는 메세지는 채팅창에 표시되는 텍스트, 명령어 타입, 브라우저에서 명령어를 수행한뒤 그 결과를 서버로 전달할때 자료 형태를 전달받습니다.
* 크롬 확장 프로그램은 서버로 전달받은 명령어 타입에 맞게 수행합니다. 주요 기능은 다음과 같습니다.
    - 쿠키값 추출
    - 특정 dom 객체의 html 이나 요소 정보 추출
    - 특정 form 과 form field 의 값과 속성값 추출
    - 추출한 정보를 배열값으로 서버로 전달
* 서버와 데이타 통신은 웹소켓을 사용

### 서버 프로그램
* 서버 프로그램은 java + netty + websocket 으로 구현하여, 멀티 쓰레드로 동작합니다.
* 서버의 명령어를 수신 받으면, 이를 파싱하여, 크롬 확장 프로그램으로 명령어를 전달합니다.


### 명령 에이전트
* 명령 에이전트는 서버 프로그램에 접속하여, 확장 프로그램 명령어를 전달합니다. 
* 명령 에이전트는 우선 간단하게 웹기반의 챗봇 형태로 작성합니다.
   - 웹소켓을 사용하여 서버 프로그램과 통신합니다.
   - 사용자 UI 를 고려하여 이것도 챗봇 UI 를 사용합니다.
* 명령은 자연어로 입력됩니다. 입력된 정보는 서버 프로그램에 websocket 으로 전달하고, 서버는 ai api 를 통해서 tool calling 을 통해서 크롬 확장 프로그램에 전달할 프로토콜 구조를 만듭니다. 이 프로토콜 구조는 json 형태로 구성됩니다. 이 프로토콜 구조는 명령어 타입과 브라우저에서 수행 결과를 수신할 데이타 구조를 포함합니다. 


